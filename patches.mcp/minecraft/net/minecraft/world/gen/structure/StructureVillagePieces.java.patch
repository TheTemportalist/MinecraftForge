--- ../src-base/minecraft/net/minecraft/world/gen/structure/StructureVillagePieces.java
+++ ../src-work/minecraft/net/minecraft/world/gen/structure/StructureVillagePieces.java
@@ -58,6 +58,7 @@
         list.add(new StructureVillagePieces.PieceWeight(StructureVillagePieces.Field2.class, 3, MathHelper.getRandomIntegerInRange(random, 2 + p_75084_1_, 4 + p_75084_1_ * 2)));
         list.add(new StructureVillagePieces.PieceWeight(StructureVillagePieces.House2.class, 15, MathHelper.getRandomIntegerInRange(random, 0, 1 + p_75084_1_)));
         list.add(new StructureVillagePieces.PieceWeight(StructureVillagePieces.House3.class, 8, MathHelper.getRandomIntegerInRange(random, 0 + p_75084_1_, 3 + p_75084_1_ * 2)));
+        net.minecraftforge.fml.common.registry.VillagerRegistry.addExtraVillageComponents(list, random, p_75084_1_);
         Iterator<StructureVillagePieces.PieceWeight> iterator = list.iterator();
 
         while (iterator.hasNext())
@@ -130,6 +131,10 @@
         {
             structurevillagepieces$village = StructureVillagePieces.House3.func_175849_a(start, p_176065_2_, rand, p_176065_4_, p_176065_5_, p_176065_6_, facing, p_176065_8_);
         }
+        else
+        {
+            structurevillagepieces$village = net.minecraftforge.fml.common.registry.VillagerRegistry.getVillageComponent(weight, start , p_176065_2_, rand, p_176065_4_, p_176065_5_, p_176065_6_, facing, p_176065_8_);
+        }
 
         return structurevillagepieces$village;
     }
@@ -1447,6 +1452,7 @@
             public List<StructureVillagePieces.PieceWeight> structureVillageWeightedPieceList;
             public List<StructureComponent> field_74932_i = Lists.<StructureComponent>newArrayList();
             public List<StructureComponent> field_74930_j = Lists.<StructureComponent>newArrayList();
+            public BiomeGenBase biome;
 
             public Start()
             {
@@ -1460,6 +1466,7 @@
                 this.terrainType = p_i2104_7_;
                 BiomeGenBase biomegenbase = chunkManagerIn.getBiomeGenerator(new BlockPos(p_i2104_4_, 0, p_i2104_5_), Biomes.field_180279_ad);
                 this.inDesert = biomegenbase == Biomes.desert || biomegenbase == Biomes.desertHills;
+                this.biome = biomegenbase;
                 this.func_175846_a(this.inDesert);
             }
 
@@ -1520,6 +1527,7 @@
             protected int field_143015_k = -1;
             private int villagersSpawned;
             private boolean isDesertVillage;
+            private StructureVillagePieces.Start startPiece;
 
             public Village()
             {
@@ -1532,6 +1540,7 @@
                 if (start != null)
                 {
                     this.isDesertVillage = start.inDesert;
+                    startPiece = start;
                 }
             }
 
@@ -1660,6 +1669,9 @@
 
             protected IBlockState func_175847_a(IBlockState p_175847_1_)
             {
+                net.minecraftforge.event.terraingen.BiomeEvent.GetVillageBlockID event = new net.minecraftforge.event.terraingen.BiomeEvent.GetVillageBlockID(startPiece == null ? null : startPiece.biome, p_175847_1_);
+                net.minecraftforge.common.MinecraftForge.TERRAIN_GEN_BUS.post(event);
+                if (event.getResult() == net.minecraftforge.fml.common.eventhandler.Event.Result.DENY) return event.replacement;
                 if (this.isDesertVillage)
                 {
                     if (p_175847_1_.getBlock() == Blocks.log || p_175847_1_.getBlock() == Blocks.log2)
